services:
  frontend:
    image: ghcr.io/coldfirel15/gamecontainermanager:${DOCKER_TAG:-latest}
    environment:
      DOCKERCONTAINERMANAGER_AUTHENTICATION: "True"
      DOCKERCONTAINERMANAGER_DEBUG: "False"
      DOCKERCONTAINERMANAGER_SERVICE_TYPE: frontend
      DOCKERCONTAINERMANAGER_FAVICON_URL: ${DOCKERCONTAINERMANAGER_FAVICON_URL}
      DOCKERCONTAINERMANAGER_SECRET_KEY: ${DOCKERCONTAINERMANAGER_SECRET_KEY}
      DOCKERCONTAINERMANAGER_DISCORD_CLIENT_ID: ${DOCKERCONTAINERMANAGER_DISCORD_CLIENT_ID}
      DOCKERCONTAINERMANAGER_DISCORD_CLIENT_SECRET: ${DOCKERCONTAINERMANAGER_DISCORD_CLIENT_SECRET}
      DOCKERCONTAINERMANAGER_FRONTEND_URL: ${DOCKERCONTAINERMANAGER_FRONTEND_URL}
    ports:
      - "5000:5000"

  backend:
    image: ghcr.io/coldfirel15/gamecontainermanager:${DOCKER_TAG:-latest}
    environment:
      DOCKERCONTAINERMANAGER_DEBUG: "False"
      DOCKERCONTAINERMANAGER_SERVICE_TYPE: backend
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  bot:
    image: ghcr.io/coldfirel15/gamecontainermanager:${DOCKER_TAG:-latest}
    environment:
      TZ: Europe/Paris
      DOCKERCONTAINERMANAGER_FRONTEND_URL: ${DOCKERCONTAINERMANAGER_FRONTEND_URL}
      DOCKERCONTAINERMANAGER_DISCORD_TOKEN: ${DISCORD_TOKEN} # Need to be set // Can be put in docker secret to avoid exposing the token
      DOCKERCONTAINERMANAGER_SERVICE_TYPE: bot
